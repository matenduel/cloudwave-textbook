---
title: "2407"
weight: 2407
draft: false
---
## 1. Docker - 종합

> 정답 2, 5

다음 설명 중 옳은 것을 `2개` 고르시오.

1. `docker pull`을 사용할 때 `Tag`가 동일하다면 항상 동일한 이미지를 다운받는다.
2. `docker run`을 사용할 때  `-d`  옵션을 이용하면 백그라운드에서  컨테이너를 실행한다.
3. `expose`를 이용하면 포트를 노출시키는 경우, `Host` 머신에서도 컨테이너의 서비스에 접근 할 수 있다.
4. `volume`은 `1개`만 사용할 수 있다.
5. `-f` 옵션을 이용하여 사용할 `Dockerfile` 을 지정할 수 있다.



## 2. Dockerfile

> 정답 3

`Dockerfile` 명령어 설명 중 옳지 않은 것은?

1. `build`시에 사용할 변수는 `ARG`를 이용하여 정의한다.
2. `Remote` 파일을 추가하려면 `ADD`를 사용하여야 한다.
3. `FROM`은 `Dockerfile`마다 한번만 사용할 수 있다.
4. 컨테이너에서 사용할 환경변수는 `ENV`를 이용하여 정의한다.
5. `RUN`은 이미지 빌드시에 실행된다.



## 3. Dockerfile

> 정답 1, 3

다음 `Dockerfile`과 명령어를 이용하여 이미지를 제작하였을 때, 올바르게 설명한 것을 `2개` 고르시오.

```dockerfile
# Dockerfile
FROM nginx:stable-bullseye

USER root

RUN apt-get update && apt-get -y upgrade

RUN apt-get install -y curl

RUN mkdir /code

WORKDIR /code

ADD install.sh ./tmp/install.sh

WORKDIR /root

EXPOSE 80
```

```shell
# Build Command
docker build -t quiz:3 .
```



1. 컴퓨터에 따라 사용되는 `nginx:stable-bullseye` 이미지의 `Digest` 값은 달라질 수 있다.
2. `install.sh` 파일 수정 후 이미지를 다시 빌드하면 `curl` 설치 작업을 다시 수행한다.
3. `install.sh` 파일은 `/code` 아래에 저장된다.
4. `quiz:3` 이미지를 사용하면 자동으로 `Host`에서 `80포트`에 접근할 수 있다.
5. `quiz:3` 이미지는 총 4개의 레이어(`layer`)로 구성된다.





## 4. Docker CLI

> 정답 5

다음 `Dockerfile`을 이용하여 `quiz:4` 이미지를 생성하였다.

```dockerfile
FROM ubuntu:22.04

CMD ["3600"]

ENTRYPOINT ["sleep"]
```

다음 명령어를 실행하였을 때, 출력되는 값은?

```cmd
$ docker run quiz:4 echo test
```



1. `sleep test`
2. `echo test 3600`
3. `test`
4. `echo test`
5. 에러가 발생한다.



## 5. Docker CLI

> 정답 4

다음 명령어를 이용하여 컨테이너를 실행하였을 때, 올바르지 않은 것은?

```cmd
$ docker run -it --name base ubuntu /bin/bash -c "apt-get update && apt-get -y upgrade && apt install -y curl && sleep infinity"
```

1. 이미지는 `ubutu:latest`가 사용된다.
2. 컨테이너 생성 후, 화면에서 로그를 확인할 수 있다.
3. 컨테이너가 실행될 때 컨테이너의 `1번` 프로세스에서 `curl`을 설치한다.
4. 컨테이너 실행 후, `crtl + c`를 이용하여 컨테이너를 종료하지 않고 빠져나올 수 있다.
5. 컨테이너가 종료된 이후에도 `docker logs`를 이용하여 로그를 확인할 수 있다.



## 6. Docker Compose

> 정답 2

다음 설명 중 옳지 않은 것은?

1. `compose version`에 따라서 사용할 수 있는 기능이 달라질 수 있다.
2. 동일한 프로젝트 속 컨테이너들은 모두 같은 네트워크만 사용한다.
3. `container_name`이 설정된 경우, `deploy`의 `replicas`는 2 이상의 값을 사용할 수 없다.
4. `pull_policy`가 `always`인 경우, 매번 `registry`에서 이미지를 다운로드 한다.
5. `profile`을 이용하여 `docker-compose.yaml` 파일 속 일부 서비스만 실행할 수도 있다.



## 7. Docker Compose CLI

> 정답 5

다음 설명 중 옳지 않은 것은?

1. `docker compose up`을 사용하면 현재 디렉토리에 있는 `docker-compose.yaml`이 사용된다.
2. 프로젝트 이름은 `--project-name` 또는 `-p`를 이용하여 설정할 수 있다.
3. `docker compose down`를 이용하면 `docker-compose.yaml`에 정의된 서비스만 종료된다.
4. `docker compose logs`를 이용하면 특정 서비스의 로그만 확인할 수도 있다.
5. `docker compose up`을 이용하면 기존에 존재하던 컨테이너도 `매번` 재생성된다.





## 8. Docker Compose YAML (Anchor & Alias)

> 정답 5

다음은 `.env`파일과 `docker-compose.yaml`파일이다.

```tex
# .env file
FROM=".env.from"
BY=".env.by"
STAGE="local"
```

```tex
# prod.env file
FROM="Cloudwave"
BY="prod.env"
STAGE="prod"
```

```yaml
# docker-compose.yaml file
version: '3.8'

x-common:
  &common
  restart: always
  volumes:
    - source:/code
  environment:
    &default-env
    BY: "x-common.by"

services:
  ubuntu:
    <<: *common
    image: ubuntu:22.04
    environment:
      FROM: "service.from"
      BY: "service.by"
    env_file:
      - prod.env
      - .env
    entrypoint: /bin/bash
    command:
      - -c
      - echo "STAGE = $${STAGE} | FROM = ${FROM} | BY = $${BY}"
    restart: no

volumes:
  source:
```

3개의 파일이 하나의 폴더에 위치하였을 때, `docker compose up`의 출력 값으로 올바른 것은?

1. ` STAGE = prod | FROM = Cloudwave | BY = prod.env`
2. `STAGE = prod | FROM = Cloudwave | BY = service.by`
3. `STAGE = prod | FROM = .env.from | BY = .env.by`
4. `STAGE = local | FROM = Cloudwave | BY = service.by`
5. `STAGE = local | FROM = .env.from | BY = service.by`



## 9. Docker Compose

> 정답 1, 3

다음은 `docker-compose.yaml`이다.

```yaml
# docker-compose.yaml
version: '3.8'
name: 'quiz'

services:
  postgres:
    image: postgres:16.1-bullseye
    networks:
      - db
    environment:
      - POSTGRES_PASSWORD=mysecretpassword
    volumes:
      - db_data:/var/lib/postgresql/data:rw

  server:
    image: ubuntu:22.04
    depends_on:
      - postgres
    networks:
      - db

  pgadmin:
    image: dpage/pgadmin4:7.4
    environment:
      - PGADMIN_DEFAULT_EMAIL=user@sample.com
      - PGADMIN_DEFAULT_PASSWORD=SuperSecret
    depends_on:
      - postgres
    profiles:
      - debug
    networks:
      - db

volumes:
  db_data:
    name: "psql_data"
    external: true

networks:
  private:
    name: "private"
  db:
    name: "db-net"
    external: true
```

위의 `docker-compose.yaml`을 이용하여 다음 명령어로 프로젝트를 실행하였다. 이때, 옳지 않은 것을 2개 고르세요.

```cmd
$ docker compose -p cloudwave up -d
```

1. 프로젝트의 이름은 `quiz`로 설정된다.
2. `pgadmin` 서비스는 실행되지 않는다.
3. `db` 네트워크는 프로젝트가 실행될 때 생성된다.
4. 이름이 `psql_data`인 볼륨(`docker volume`)이 사용된다.
5. `postgres`과 `server` 서비스는 서로 네트워크 통신이 가능하다.



## 10. Docker Compose

> 정답 4

아래에 작성된 `configuration`을 이용하여  프로젝트를 실행하려고 한다.

```yaml
name: "quiz"

services:
  backend:
    image: example/database
    volumes:
      - db-storage:/etc/data

  backup:
    image: backup-service
    volumes:
      - ./db-data:/var/lib/backup/data:rw

volumes:
  {NAME}:
    name: "my-app-data"
    external: true
    labels:
      com.example.description: "Database volume"
```

다음 중 `{NAME}`에 들어갈 단어는?

1. `db-data`
2. `my-app-data`
3. `quiz_db-data`
4. `db-storage`
5. `external-my-app-data`
